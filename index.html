<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Christmas Trivia Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f8ff;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h1, h2, h3 {
      text-align: center;
    }
    #game-container {
      max-width: 800px;
      margin: 0 auto;
    }
    #start-screen, #question-screen, #group-scoreboard, #result-screen {
      margin: 20px 0;
      text-align: center;
    }
    #start-screen select, #start-screen input[type="radio"] {
      margin: 5px;
    }
    .question-count {
      font-size: 1.1em;
      margin-bottom: 10px;
    }
    #question-text {
      font-size: 1.3em;
      margin: 20px 0;
    }
    .options-list {
      list-style: none;
      padding: 0;
    }
    .options-list li {
      background: #ececec;
      margin: 5px 0;
      padding: 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    .options-list li:hover {
      background: #e0e0e0;
    }
    .correct {
      background-color: #c8e6c9 !important;  /* light green */
    }
    .wrong {
      background-color: #ffcdd2 !important;  /* light red */
    }
    .disabled {
      pointer-events: none;
    }
    #feedback {
      font-weight: bold;
      margin: 10px;
    }
    #controls {
      margin: 20px 0;
    }
    #controls button {
      padding: 8px 12px;
      font-size: 1em;
      margin: 5px;
    }
    #group-scoreboard table {
      margin: 0 auto 20px;
      border-collapse: collapse;
    }
    #group-scoreboard th, #group-scoreboard td {
      padding: 8px 12px;
      border: 1px solid #ccc;
    }
    #group-scoreboard td button {
      margin: 0 5px;
      padding: 4px 8px;
    }
    #instructions {
      text-align: left;
      max-width: 800px;
      margin: 40px auto;
      background: #fff;
      padding: 20px;
      border: 1px solid #ddd;
    }
    #instructions h2 {
      text-align: left;
    }
  </style>
</head>
<body>

<div id="game-container">
  <h1>Christmas Trivia Game</h1>

  <!-- Start Screen -->
  <div id="start-screen">
    <h3>Select Game Mode and Number of Questions</h3>
    <p>
      <label><input type="radio" name="mode" value="solo" checked> Solo Play</label>
      <label><input type="radio" name="mode" value="group"> Group Play</label>
    </p>
    <div id="team-select" style="display: none; margin: 10px;">
      Number of teams: 
      <select id="num-teams">
        <option value="2">2 Teams</option>
        <option value="3">3 Teams</option>
        <option value="4">4 Teams</option>
      </select>
    </div>
    <p>
      Number of questions: 
      <select id="num-questions">
        <option value="30">30</option>
        <option value="50">50</option>
        <option value="70">70</option>
      </select>
    </p>
    <button id="start-button">Start Game</button>
  </div>

  <!-- Question Screen -->
  <div id="question-screen" style="display: none;">
    <div id="score-display" style="margin-bottom: 10px;"></div>
    <div class="question-count" id="progress"></div>
    <div id="question-text"></div>
    <ul id="options" class="options-list"></ul>
    <div id="feedback"></div>
    <div id="controls">
      <button id="reveal-button" style="display: none;">Reveal Options</button>
      <button id="show-answer-button" style="display: none;">Reveal Answer</button>
      <button id="next-button" style="display: none;">Next Question</button>
    </div>
  </div>

  <!-- Scoreboard for Group Mode -->
  <div id="group-scoreboard" style="display: none;">
    <h3>Scoreboard</h3>
    <table id="score-table"></table>
  </div>

  <!-- Result Screen -->
  <div id="result-screen" style="display: none;">
    <h2 id="result-text"></h2>
    <button id="restart-button">Play Again</button>
  </div>
</div>

<script>
  // Question pool: an array of question objects with question, correct answer, and distractors
  var questions = [
    { question: "In the song “Frosty the Snowman,” what made Frosty come to life?",
      correct: "An old silk hat",
      wrong: ["A corncob pipe", "A magical scarf", "Christmas snow", "Holiday cheer"] },
    { question: "What Christmas decoration was originally made from strands of silver?",
      correct: "Tinsel",
      wrong: ["Garland", "Wreaths", "String lights", "Popcorn garlands"] },
    { question: "What Christmas beverage is also known as “milk punch?”",
      correct: "Eggnog",
      wrong: ["Hot cocoa", "Mulled wine", "Apple cider", "Hot buttered rum"] },
    { question: "Who played George Bailey in the Christmas classic “It’s a Wonderful Life?”",
      correct: "Jimmy Stewart",
      wrong: ["Cary Grant", "Bing Crosby", "Gary Cooper", "Henry Fonda"] },
    { question: "Per a recent holiday fad, what “spy” hides around the house, reporting back to Santa on who has been naughty and nice?",
      correct: "The Elf on the Shelf",
      wrong: ["Santa’s Spy", "Christmas Scout", "Reindeer on the Roof", "The Yule Watchman"] },
    { question: "What Christmas-themed ballet premiered in Saint Petersburg, Russia in 1892?",
      correct: "The Nutcracker",
      wrong: ["Swan Lake", "Sleeping Beauty", "The Snow Queen", "Coppélia"] },
    { question: "One of Santa’s reindeer shares a name with a famous symbol of Valentine’s Day. Which reindeer is that?",
      correct: "Cupid",
      wrong: ["Dasher", "Prancer", "Vixen", "Blitzen"] },
    { question: "What much-reviled Christmas edible is known for its long shelf life?",
      correct: "Fruitcake",
      wrong: ["Mince pie", "Figgy pudding", "Eggnog", "Chestnuts"] },
    { question: "What cartoon character’s name is used to describe a small, unsuccessful Christmas tree?",
      correct: "Charlie Brown",
      wrong: ["Snoopy", "The Grinch", "Bugs Bunny", "Mickey Mouse"] },
    { question: "What’s the name of Rudolph’s girlfriend in the “Rudolph the Red-Nosed Reindeer” television special?",
      correct: "Clarice",
      wrong: ["Vixen", "Cupid", "Noelle", "Holly"] },
    { question: "In the United States, over 2 billion of these are sent each year at Christmastime.",
      correct: "Christmas cards",
      wrong: ["Emails", "Packages", "Text messages", "Party invitations"] },
    { question: "What animated 2004 film is about a train that carries kids to the North Pole on Christmas Eve?",
      correct: "The Polar Express",
      wrong: ["The Santa Clause", "Arthur Christmas", "Journey to the North Pole", "Santa Claus: The Movie"] },
    { question: "What phrase, originally from “A Christmas Carol,” means to express displeasure at Christmas cheer?",
      correct: "Bah humbug!",
      wrong: ["Ho ho ho!", "Good grief!", "\"Nonsense!\"", "\"Poppycock!\""] },
    { question: "What song was initially condemned by the Roman Catholic Church for allegedly portraying an adulterous affair?",
      correct: "I Saw Mommy Kissing Santa Claus",
      wrong: ["Santa Baby", "Baby, It’s Cold Outside", "Grandma Got Run Over by a Reindeer", "All I Want for Christmas Is You"] },
    { question: "In “A Christmas Story,” what happens to Ralphie’s friend as a result of a “triple-dog dare” from another classmate?",
      correct: "He gets his tongue stuck to a flagpole.",
      wrong: ["He nearly shoots his eye out with a BB gun", "He falls and breaks his arm", "He spills hot cocoa on himself", "He gets stuck in a chimney"] },
    { question: "What’s the German name for the song known in English as “O Christmas Tree?”",
      correct: "O Tannenbaum",
      wrong: ["O Weihnachtsbaum", "O Fir Tree", "O Evergreen", "\"Stille Nacht\""] },
    { question: "What do children traditionally get in their stockings if they’re on the Naughty List?",
      correct: "A lump of coal",
      wrong: ["A bundle of sticks", "A potato", "Nothing (an empty stocking)", "A candy cane"] },
    { question: "What “cool” character is said to leave icy patterns on windows on winter mornings?",
      correct: "Jack Frost",
      wrong: ["Old Man Winter", "Father Christmas", "Frosty the Snowman", "The Snow Queen"] },
    { question: "What game, found under Christmas trees since 1978, had the tagline “the frantic marble munching game”?",
      correct: "Hungry Hungry Hippos",
      wrong: ["Pac-Man", "Mouse Trap", "Candy Land", "Marble Madness"] },
    { question: "The name “Santa Claus” comes from the Dutch name for St. Nicholas (Sinterklaas).",
      correct: "True – it originates from Dutch",
      wrong: ["False – it comes from German", "False – it comes from French", "False – it was invented in America", "False – it comes from Swedish"] },
    { question: "In 1981, Bob and Doug McKenzie released their own version of a classic Christmas song. Which song was that?",
      correct: "The Twelve Days of Christmas",
      wrong: ["Jingle Bells", "Deck the Halls", "Winter Wonderland", "O Christmas Tree"] },
    { question: "What’s the name of the family featured in “National Lampoon’s Christmas Vacation”?",
      correct: "The Griswolds",
      wrong: ["The McCallisters", "The Parkers", "The Baileys", "The Murphys"] },
    { question: "What beloved Christmas song was recorded by Puerto Rican singer José Feliciano in 1970?",
      correct: "Feliz Navidad",
      wrong: ["Blue Christmas", "Jingle Bell Rock", "Rockin’ Around the Christmas Tree", "Santa Claus Is Comin’ to Town"] },
    { question: "What science fiction franchise had its own holiday television special in 1978?",
      correct: "Star Wars",
      wrong: ["Star Trek", "Doctor Who", "Battlestar Galactica", "Planet of the Apes"] },
    { question: "The charity Toys for Tots is run by the reserve force of what branch of the U.S. military?",
      correct: "The Marines",
      wrong: ["Army Reserve", "Navy Reserve", "Air Force Reserve", "Coast Guard Reserve"] },
    { question: "The first artificial Christmas tree was made in the 19th century using the feathers of what bird?",
      correct: "Goose",
      wrong: ["Turkey", "Chicken", "Duck", "Swan"] },
    { question: "In North America, wild reindeer are known by what name?",
      correct: "Caribou",
      wrong: ["Moose", "Elk", "Antelope", "Mule Deer"] },
    { question: "What holiday is celebrated the day after Christmas in the UK, Canada, and other Commonwealth countries?",
      correct: "Boxing Day",
      wrong: ["St. Stephen’s Day", "Kwanzaa", "Epiphany", "Commonwealth Day"] },
    { question: "In Charles Dickens’ “A Christmas Carol,” what was Scrooge’s first name?",
      correct: "Ebenezer",
      wrong: ["Edmund", "Jedediah", "Phineas", "Augustus"] },
    { question: "In the song “Grandma Got Run Over by a Reindeer,” what “incriminating” evidence was found on Grandma’s back?",
      correct: "Claus marks",
      wrong: ["Reindeer hoof prints", "Sleigh tracks", "Coal dust", "Santa’s hat"] },
    { question: "According to legend, what holiday candy was shaped to resemble a shepherd’s staff to remind children of the shepherds who visited baby Jesus?",
      correct: "Candy canes",
      wrong: ["Gingerbread men", "Striped ribbon candy", "Sugar cookies", "Peppermint sticks"] },
    { question: "In the song “We Wish You a Merry Christmas,” what type of pudding do carolers demand?",
      correct: "Figgy pudding",
      wrong: ["Plum pudding", "Fruitcake", "Mince pie", "Bread pudding"] },
    { question: "What’s the name of the snowman who provides comic relief in Disney’s movie *Frozen*?",
      correct: "Olaf",
      wrong: ["Sven", "Kristoff", "Marshmallow", "Frosty"] },
    { question: "What is the actual color of snow (i.e., snowflakes)?",
      correct: "Colorless (translucent)",
      wrong: ["White", "Blue", "Gray", "Pink"] },
    { question: "Which animated TV show features Mr. Hankey, the Christmas Poo, in its holiday episodes?",
      correct: "South Park",
      wrong: ["Family Guy", "The Simpsons", "Futurama", "Beavis and Butt-Head"] },
    { question: "In 1847, Hans Greiner began producing glass versions of what traditional holiday decorations?",
      correct: "Ornaments",
      wrong: ["Candy canes", "Wreaths", "Tinsel", "Stockings"] },
    { question: "Starting in 1933, what department store published a “Wish Book” catalog each holiday season?",
      correct: "Sears",
      wrong: ["Montgomery Ward", "Macy’s", "JCPenney", "Woolworth’s"] },
    { question: "What Christmas song, recorded in 1994, surpassed 2 billion streams on Spotify by 2024?",
      correct: "All I Want For Christmas Is You",
      wrong: ["Last Christmas", "Jingle Bell Rock", "White Christmas", "Santa Baby"] },
    { question: "What hit 1984 movie begins with a father buying a mysterious creature as a Christmas present for his son?",
      correct: "Gremlins",
      wrong: ["Ghostbusters", "Back to the Future", "Labyrinth", "The NeverEnding Story"] },
    { question: "True or False: The mother in “A Christmas Story” was correct that falling icicles can seriously hurt people.",
      correct: "True",
      wrong: ["False", "Only in very cold climates", "Only if they are very large", "Only during spring thaw"] },
    { question: "What Bing Crosby song is the best-selling single of all time?",
      correct: "White Christmas",
      wrong: ["Silent Night", "Rudolph the Red-Nosed Reindeer", "Jingle Bells", "Winter Wonderland"] },
    { question: "In the early 1800s, the first gingerbread houses were reportedly inspired by what famous fairy tale?",
      correct: "Hansel and Gretel",
      wrong: ["Little Red Riding Hood", "Cinderella", "Rapunzel", "Jack and the Beanstalk"] },
    { question: "“Miracle on 34th Street” centers on what real-life department store?",
      correct: "Macy’s",
      wrong: ["Gimbels", "Bloomingdale’s", "Saks Fifth Avenue", "Woolworth’s"] },
    { question: "What traditional Christmas decoration is actually a parasitic plant?",
      correct: "Mistletoe",
      wrong: ["Holly", "Poinsettia", "Ivy", "Christmas cactus"] },
    { question: "In “The Muppet Christmas Carol,” who played Scrooge (hint: it wasn’t a muppet)?",
      correct: "Michael Caine",
      wrong: ["Patrick Stewart", "Ian McKellen", "George C. Scott", "Tim Curry"] },
    { question: "What beverage company has been using Santa Claus in its advertising since 1931?",
      correct: "Coca-Cola",
      wrong: ["Pepsi", "Dr Pepper", "7-Up", "RC Cola"] },
    { question: "What 2003 film follows a hard-living mall Santa?",
      correct: "Bad Santa",
      wrong: ["The Santa Clause", "Elf", "Fred Claus", "Bad Santa 2"] },
    { question: "In \"The Twelve Days of Christmas,\" what are there eleven of?",
      correct: "Pipers piping",
      wrong: ["Lords a-leaping", "Ladies dancing", "Drummers drumming", "Maids a-milking"] },
    { question: "In “The Chipmunk Song,” what do the chipmunks want for Christmas besides a plane that loops the loop?",
      correct: "A hula hoop",
      wrong: ["A pony", "A yo-yo", "A kite", "A train set"] },
    { question: "Whose recording of “Rudolph the Red-Nosed Reindeer” topped the U.S. charts in 1949?",
      correct: "Gene Autry",
      wrong: ["Bing Crosby", "Frank Sinatra", "Perry Como", "Nat King Cole"] },
    { question: "“Mele Kalikimaka” means “Merry Christmas” in what language?",
      correct: "Hawaiian",
      wrong: ["Spanish", "Filipino (Tagalog)", "Maori", "Swahili"] },
    { question: "A booklet published by Montgomery Ward in 1939 introduced what famous Christmas character?",
      correct: "Rudolph the Red-Nosed Reindeer",
      wrong: ["Frosty the Snowman", "Jack Frost", "The Little Drummer Boy", "Ebenezer Scrooge"] },
    { question: "In 1996, what toy with origins on *Sesame Street* became a sensational Christmas must-have?",
      correct: "Tickle Me Elmo",
      wrong: ["Furby", "Beanie Babies", "Tamagotchi", "Cabbage Patch Kids"] },
    { question: "How much weight does the average American actually gain over the holidays?",
      correct: "About 1 pound",
      wrong: ["None at all", "About 3 pounds", "About 5 pounds", "Over 8 pounds"] },
    { question: "What major event of the American Revolution took place on Christmas night in 1776?",
      correct: "Washington’s crossing of the Delaware",
      wrong: ["The Boston Tea Party", "The signing of the Declaration of Independence", "The winter at Valley Forge", "The Battle of Yorktown"] },
    { question: "What wintery word comes from the Latin for “sun stands still”?",
      correct: "Solstice",
      wrong: ["Equinox", "Aurora", "Horizon", "Aphelion"] },
    { question: "True or False: “Kris Kringle” is the German name for Santa Claus.",
      correct: "False (it comes from the German for Christ Child, not Santa)",
      wrong: ["True", "It’s the Dutch name for Santa", "It was popularized by a 1947 movie", "It was invented by a department store"] },
    { question: "What little green toys, first made in 1938, became classic stocking stuffers for boys during WWII?",
      correct: "Plastic Army Men",
      wrong: ["Marbles", "Lincoln Logs", "Matchbox cars", "Yo-yos"] },
    { question: "What organization runs the “Operation Santa” program matching children’s letters to volunteer gift-givers?",
      correct: "The United States Postal Service",
      wrong: ["Salvation Army", "Make-A-Wish Foundation", "Boy Scouts of America", "United Way"] },
    { question: "According to Guinness World Records, the tallest cut Christmas tree was about how many feet tall?",
      correct: "200 feet",
      wrong: ["100 feet", "300 feet", "400 feet", "250 feet"] },
    { question: "In *Home Alone*, what is the name of the town where the McCallister family lives?",
      correct: "Winnetka, Illinois",
      wrong: ["Chicago, Illinois", "New York, New York", "Boston, Massachusetts", "Cleveland, Ohio"] },
    { question: "How many ghosts visit Ebenezer Scrooge in *A Christmas Carol*?",
      correct: "4",
      wrong: ["1", "2", "3", "5"] },
    { question: "What is the name of the Grinch’s dog in *How the Grinch Stole Christmas*?",
      correct: "Max",
      wrong: ["Sam", "Buddy", "Spike", "Rover"] },
    { question: "In *It’s a Wonderful Life*, what is the name of George Bailey’s guardian angel?",
      correct: "Clarence",
      wrong: ["Gabriel", "Michael", "Harold", "George"] },
    { question: "What is the name of the Abominable Snowman in the *Rudolph the Red-Nosed Reindeer* special?",
      correct: "The Bumble",
      wrong: ["The Yeti", "Bigfoot", "Snowball", "Mr. Snow"] },
    { question: "Which actor voices the Grinch in the 2018 animated film *The Grinch*?",
      correct: "Benedict Cumberbatch",
      wrong: ["Jim Carrey", "Pharrell Williams", "Bill Hader", "Will Ferrell"] },
    { question: "In *A Christmas Story*, what does the Old Man excitedly call the leg lamp he won?",
      correct: "A \"Major Award\"",
      wrong: ["Grand Prize", "Blue Ribbon", "Top Honor", "Prestigious Award"] },
    { question: "What is the name of Jack Skellington’s love interest in *The Nightmare Before Christmas*?",
      correct: "Sally",
      wrong: ["Lucy", "Emily", "Jill", "Lydia"] },
    { question: "In which country is the Christmas gift-bringer known as Joulupukki?",
      correct: "Finland",
      wrong: ["Sweden", "Norway", "Iceland", "Estonia"] },
    { question: "What do the red stripes on a candy cane traditionally symbolize?",
      correct: "The blood of Christ",
      wrong: ["Santa’s red suit", "No special meaning", "The love of Christ", "The joy of the season"] },
    { question: "Which U.S. state was the first to recognize Christmas as a legal holiday?",
      correct: "Alabama",
      wrong: ["New York", "Massachusetts", "Virginia", "Pennsylvania"] },
    { question: "In what century did the first recorded use of a Christmas tree take place?",
      correct: "16th century",
      wrong: ["18th century", "17th century", "19th century", "12th century"] },
    { question: "In Sweden, a giant straw Christmas goat is built each year in Gävle. What often happens to it?",
      correct: "It gets burned down by vandals",
      wrong: ["It stays up all year", "It collapses under snow", "It is stolen by pranksters", "It is moved to the capital"] },
    { question: "What is the four-week period before Christmas in the Christian calendar called?",
      correct: "Advent",
      wrong: ["Lent", "Epiphany", "Yuletide", "Christmastide"] },
    { question: "After whom is the poinsettia (the Christmas plant) named?",
      correct: "Joel Roberts Poinsett",
      wrong: ["William Poinsett", "Samuel Pickens", "John Holly", "Henry Cole"] },
    { question: "In the 2003 movie *Elf*, what is the nickname of the head elf who raised Buddy?",
      correct: "Papa Elf",
      wrong: ["Elmer the Elf", "Buddy Sr.", "Chief Elf Charlie", "Santa Jr."] },
    { question: "What do children usually leave out for Santa on Christmas Eve?",
      correct: "Cookies and milk",
      wrong: ["Carrots for the reindeer", "Mince pie and sherry", "A glass of wine", "Stockings filled with candy"] },
    { question: "In the Rudolph special, prospector Yukon Cornelius is constantly searching for what?",
      correct: "Silver and gold",
      wrong: ["Gold", "Peppermint", "Oil", "Treasure"] },
    { question: "Which two spices are the primary ingredients in gingerbread?",
      correct: "Ginger and cinnamon",
      wrong: ["Cinnamon and nutmeg", "Nutmeg and cloves", "Allspice and cinnamon", "Ginger and vanilla"] },
    { question: "What meat is the traditional centerpiece of a British Christmas dinner?",
      correct: "Turkey",
      wrong: ["Goose", "Ham", "Roast beef", "Duck"] },
    { question: "What is the German Christmas cake – a dense, spiced fruit bread – called?",
      correct: "Stollen",
      wrong: ["Panettone", "Fruitcake", "Lebkuchen", "Strudel"] },
    { question: "In *A Christmas Story*, what did the Parkers eat for Christmas dinner after their turkey was ruined?",
      correct: "Roast duck (at a Chinese restaurant)",
      wrong: ["Christmas ham", "Takeout pizza", "Chinese noodles", "Fried chicken"] },
    { question: "What do the French call their traditional Yule log cake dessert?",
      correct: "Bûche de Noël",
      wrong: ["Croquembouche", "Galette des Rois", "Crème brûlée", "Tarte Tatin"] },
    { question: "What flavor are classic candy canes?",
      correct: "Peppermint",
      wrong: ["Spearmint", "Wintergreen", "Cinnamon", "Cherry"] },
    { question: "What is the main alcoholic ingredient in the Scandinavian mulled wine known as glögg?",
      correct: "Red wine",
      wrong: ["Vodka", "Beer", "Whiskey", "Cider"] },
    { question: "In which town was Jesus born?",
      correct: "Bethlehem",
      wrong: ["Nazareth", "Jerusalem", "Galilee", "Capernaum"] },
    { question: "According to the Bible, who visited the baby Jesus bearing gifts?",
      correct: "The Magi (Wise Men)",
      wrong: ["Shepherds", "Angels", "The Little Drummer Boy", "The innkeeper"] },
    { question: "Who was the ruler of Judea at the time Jesus was born?",
      correct: "King Herod",
      wrong: ["Caesar Augustus", "Pontius Pilate", "King David", "Julius Caesar"] },
    { question: "Where was baby Jesus laid after he was born, according to the Nativity story?",
      correct: "In a manger",
      wrong: ["In a basket", "On the ground", "In a cradle", "On Mary’s lap"] },
    { question: "Which author wrote *A Christmas Carol*?",
      correct: "Charles Dickens",
      wrong: ["Mark Twain", "Victor Hugo", "Arthur Conan Doyle", "Thomas Hardy"] },
    { question: "Which ancient Roman festival is often seen as a precursor to Christmas?",
      correct: "Saturnalia",
      wrong: ["Sol Invictus", "Lupercalia", "Bacchanalia", "Festivus"] },
    { question: "Which country gifts a Christmas tree to London’s Trafalgar Square every year?",
      correct: "Norway",
      wrong: ["Sweden", "Germany", "Canada", "United States"] },
    { question: "Which U.S. President was the first to have a Christmas tree in the White House?",
      correct: "Franklin Pierce",
      wrong: ["Abraham Lincoln", "Ulysses S. Grant", "Theodore Roosevelt", "James Madison"] },
    { question: "In *Home Alone*, what is the name of the elderly neighbor that Kevin befriends?",
      correct: "Old Man Marley",
      wrong: ["Old Man Potter", "Marv Merchants", "The Shovel Slayer", "Mr. Grinch"] },
    { question: "In the Harry Potter series, what Christmas present does Harry receive from Sirius Black in *Goblet of Fire*?",
      correct: "A Firebolt broomstick",
      wrong: ["An Invisibility Cloak", "The Marauder’s Map", "A Nimbus 2000 broom", "A magical wand"] },
    { question: "Which two U.S. states have towns named “Santa Claus”?",
      correct: "Indiana and Georgia",
      wrong: ["Alaska and Arizona", "Maryland and Ohio", "Texas and California", "Florida and Alaska"] },
    { question: "Which famous scientist was born on Christmas Day, 1642?",
      correct: "Sir Isaac Newton",
      wrong: ["Galileo Galilei", "Leonardo da Vinci", "Charles Darwin", "Benjamin Franklin"] },
    { question: "In the *Friends* episode “The One with the Holiday Armadillo,” what costume does Ross wear?",
      correct: "The Holiday Armadillo",
      wrong: ["An elf", "A reindeer", "A snowman", "The Grinch"] },
    { question: "In *Love Actually*, how does Mark silently confess his love to Juliet on Christmas Eve?",
      correct: "By holding up large cue cards with messages",
      wrong: ["By singing a carol to her", "By writing her a letter", "By showing her a video he made", "By giving her a ring"] },
    { question: "What gift does Ralphie want more than anything in *A Christmas Story*?",
      correct: "A Red Ryder BB gun",
      wrong: ["A pair of ice skates", "A new bike", "A train set", "A puppy"] },
    { question: "In “The Twelve Days of Christmas,” what is given on the first day?",
      correct: "A partridge in a pear tree",
      wrong: ["Two turtle doves", "Five golden rings", "A jack-in-the-box", "A partridge in an apple tree"] },
    { question: "In *National Lampoon’s Christmas Vacation*, what does Clark Griswold use to grease his sled?",
      correct: "A non-toxic silicone-based kitchen lubricant",
      wrong: ["WD-40", "Crisco shortening", "Cooking oil", "Spray paint"] },
    { question: "Which two of Santa’s reindeer are named after weather phenomena?",
      correct: "Donner and Blitzen (Thunder and Lightning)",
      wrong: ["Comet and Cupid", "Dasher and Dancer", "Prancer and Vixen", "Rudolph and Vixen"] },
    { question: "In what year was the first Christmas card commissioned (by Sir Henry Cole)?",
      correct: "1843",
      wrong: ["1830", "1860", "1880", "1910"] }
  ];

  var scriptURL = "https://script.google.com/macros/s/AKfycbxW8WjJJ37mjvgwisDeaqo1hPfOzzZLhPbgOugAZFT0E0U0TTpd07QefMDT7lX16mkduA/exec";

  // Game state variables
  var gameMode = "solo";
  var totalQuestions = 0;
  var currentIndex = 0;
  var score = 0;
  var teamScores = [];
  var shuffledQuestions = [];
  var currentQuestion = null;
  var answered = false;

  // UI element references
  var startScreen = document.getElementById("start-screen");
  var questionScreen = document.getElementById("question-screen");
  var scoreDisplay = document.getElementById("score-display");
  var progressDisplay = document.getElementById("progress");
  var questionText = document.getElementById("question-text");
  var optionsList = document.getElementById("options");
  var feedbackEl = document.getElementById("feedback");
  var revealButton = document.getElementById("reveal-button");
  var showAnswerButton = document.getElementById("show-answer-button");
  var nextButton = document.getElementById("next-button");
  var scoreboardDiv = document.getElementById("group-scoreboard");
  var scoreTable = document.getElementById("score-table");
  var resultScreen = document.getElementById("result-screen");
  var resultText = document.getElementById("result-text");
  var restartButton = document.getElementById("restart-button");
  var modeRadios = document.getElementsByName("mode");
  var teamSelectDiv = document.getElementById("team-select");
  var numTeamsSelect = document.getElementById("num-teams");
  var numQuestionsSelect = document.getElementById("num-questions");

  // Event Listeners
  document.getElementById("start-button").addEventListener("click", startGame);
  revealButton.addEventListener("click", revealOptions);
  showAnswerButton.addEventListener("click", revealCorrectAnswer);
  nextButton.addEventListener("click", nextQuestion);
  restartButton.addEventListener("click", function() {
    window.location.reload();
  });
  // Toggle team number selection when mode changes
  for(var i=0; i<modeRadios.length; i++) {
    modeRadios[i].addEventListener("change", function() {
      if(this.value === "group") {
        teamSelectDiv.style.display = "inline-block";
      } else {
        teamSelectDiv.style.display = "none";
      }
    });
  }

  function startGame() {
    // Determine selected mode and number of questions
    var modeValue = document.querySelector('input[name="mode"]:checked').value;
    gameMode = modeValue;
    totalQuestions = parseInt(numQuestionsSelect.value);
    currentIndex = 0;
    score = 0;
    teamScores = [];

    // Shuffle question pool and pick the first N questions
    shuffledQuestions = questions.slice();  // copy array
    shuffleArray(shuffledQuestions);
    // If the pool has more than needed, trim it
    if(shuffledQuestions.length > totalQuestions) {
      shuffledQuestions = shuffledQuestions.slice(0, totalQuestions);
    }

    // Initialize scoreboard for group mode
    if(gameMode === "group") {
      var teamCount = parseInt(numTeamsSelect.value);
      teamScores = Array(teamCount).fill(0);
      updateScoreboardDisplay();
      scoreboardDiv.style.display = "block";
      scoreDisplay.style.display = "none"; // no single score display
    } else {
      scoreboardDiv.style.display = "none";
      scoreDisplay.style.display = "block";
    }

    // Hide start screen, show question screen
    startScreen.style.display = "none";
    questionScreen.style.display = "block";

    // Display the first question
    displayQuestion();
  }

  function displayQuestion() {
    // Reset feedback and controls
    feedbackEl.textContent = "";
    answered = false;
    revealButton.style.display = "none";
    showAnswerButton.style.display = "none";
    nextButton.style.display = "none";

    // Get current question object
    currentQuestion = shuffledQuestions[currentIndex];
    // Update question text and progress
    progressDisplay.textContent = "Question " + (currentIndex + 1) + " of " + totalQuestions;
    questionText.textContent = currentQuestion.question;
    // Clear old options
    optionsList.innerHTML = "";

    // If solo mode: immediately show multiple-choice options as clickable
    if(gameMode === "solo") {
      // Combine correct and wrong options and shuffle them
      var choices = [currentQuestion.correct].concat(currentQuestion.wrong);
      shuffleArray(choices);
      // Create list items for each choice
      choices.forEach(function(choice) {
        var li = document.createElement("li");
        li.textContent = choice;
        li.addEventListener("click", function() { handleAnswer(choice, li); });
        optionsList.appendChild(li);
      });
      // Display score
      scoreDisplay.textContent = "Score: " + score;
    } else if(gameMode === "group") {
      // Group mode: initially hide options, show reveal button
      revealButton.style.display = "inline-block";
      // Prepare the options in the list but keep them hidden for now
      var allOptions = [currentQuestion.correct].concat(currentQuestion.wrong);
      shuffleArray(allOptions);
      allOptions.forEach(function(choice) {
        var li = document.createElement("li");
        li.textContent = choice;
        // Disable pointer events because in group mode, selection is manual
        li.classList.add("disabled");
        optionsList.appendChild(li);
      });
      // Initially hide the options (set list items visibility to hidden)
      for(var i=0; i<optionsList.children.length; i++) {
        optionsList.children[i].style.display = "none";
      }
    }
  }

  function handleAnswer(selectedAnswer, listItemElement) {
    if(answered) return; // prevent multiple clicks
    answered = true;
    // Determine if correct
    var isCorrect = (selectedAnswer === currentQuestion.correct);
    // Update score
    if(isCorrect) {
      score += 2;
      feedbackEl.textContent = "Correct! +2 points";
    } else {
      score -= 1;
      feedbackEl.textContent = "Incorrect! -1 point";
    }
    // Highlight answers
    // Add class to correct answer option
    var listItems = optionsList.children;
    for(var i=0; i<listItems.length; i++) {
      var li = listItems[i];
      if(li.textContent === currentQuestion.correct) {
        li.classList.add("correct");
      }
      // If this li is the one user clicked and it's wrong, mark wrong
      if(li === listItemElement && !isCorrect) {
        li.classList.add("wrong");
      }
      // Disable further clicking on all options
      li.classList.add("disabled");
    }
    // Update score display (solo mode)
    scoreDisplay.textContent = "Score: " + score;
    // Proceed to next after 3 seconds
    setTimeout(function() {
      nextQuestion();
    }, 3000);
  }

  function revealOptions() {
    // Show the multiple-choice options to the screen
    for(var i=0; i<optionsList.children.length; i++) {
      optionsList.children[i].style.display = "block";
    }
    revealButton.style.display = "none";
    showAnswerButton.style.display = "inline-block";
    nextButton.style.display = "inline-block";
  }

  function revealCorrectAnswer() {
    // Highlight the correct answer for group mode
    var listItems = optionsList.children;
    for(var i=0; i<listItems.length; i++) {
      var li = listItems[i];
      if(li.textContent === currentQuestion.correct) {
        li.classList.add("correct");
      }
    }
    showAnswerButton.style.display = "none";
  }

  function nextQuestion() {
    // If in group mode, no automatic scoring changes here; host adjusts manually via scoreboard.
    // Move to next question or end game if last question reached
    currentIndex++;
    if(currentIndex < totalQuestions) {
      displayQuestion();
    } else {
      // All planned questions finished
      if(gameMode === "group") {
        // Check for tie
        var topScore = Math.max.apply(null, teamScores);
        // Get how many teams have this topScore
        var topTeams = teamScores.filter(s => s === topScore).length;
        if(topTeams > 1) {
          // Tie-breaker needed
          feedbackEl.textContent = "Tie for first place! Starting tie-breaker round.";
          totalQuestions += 1;  // extend one more question
          // If we need a new question from the pool beyond what was used
          if(currentIndex >= shuffledQuestions.length) {
            // Add one more question from the unused pool
            var remainingPool = questions.filter(q => !shuffledQuestions.includes(q));
            if(remainingPool.length > 0) {
              shuffleArray(remainingPool);
              shuffledQuestions.push(remainingPool[0]);
            }
          }
          // Continue to next question (tie-breaker)
          displayQuestion();
          return;
        }
      }
      endGame();
    }
  }

  function endGame() {
    questionScreen.style.display = "none";
    scoreboardDiv.style.display = (gameMode === "group" ? "block" : "none");
    resultScreen.style.display = "block";
    if(gameMode === "solo") {
      resultText.textContent = "Game Over! Your final score is " + score + ".";
    } else {
      // Determine winning team(s)
      var maxScore = Math.max.apply(null, teamScores);
      var winners = [];
      for(var t=0; t<teamScores.length; t++) {
        if(teamScores[t] === maxScore) winners.push("Team " + (t+1));
      }
      if(winners.length === 1) {
        resultText.textContent = winners[0] + " wins with " + maxScore + " points!";
      } else {
        resultText.textContent = "It's a tie! Winners: " + winners.join(", ") + " (each with " + maxScore + " points).";
      }
    }
    // Submit scores to Google Sheets via Apps Script web app
    submitScores();
  }

  function updateScoreboardDisplay() {
    // Build scoreboard table for group play
    scoreTable.innerHTML = "";
    var headerRow = document.createElement("tr");
    var th1 = document.createElement("th"); th1.textContent = "Team";
    var th2 = document.createElement("th"); th2.textContent = "Score";
    headerRow.appendChild(th1);
    headerRow.appendChild(th2);
    scoreTable.appendChild(headerRow);
    teamScores.forEach(function(score, index) {
      var tr = document.createElement("tr");
      var teamCell = document.createElement("td");
      teamCell.textContent = "Team " + (index+1);
      var scoreCell = document.createElement("td");
      scoreCell.textContent = score;
      // Add plus/minus buttons for manual adjustment
      var minusBtn = document.createElement("button");
      minusBtn.textContent = "–";
      minusBtn.addEventListener("click", function() {
        teamScores[index]--;
        updateScoreboardDisplay();
      });
      var plusBtn = document.createElement("button");
      plusBtn.textContent = "+";
      plusBtn.addEventListener("click", function() {
        teamScores[index]++;
        updateScoreboardDisplay();
      });
      scoreCell.appendChild(minusBtn);
      scoreCell.appendChild(plusBtn);
      tr.appendChild(teamCell);
      tr.appendChild(scoreCell);
      scoreTable.appendChild(tr);
    });
  }

  // In group mode, update scoreboard whenever teamScores array is changed
  // We'll use a Proxy or just call update after every manual change inside the button events (already done above in plus/minus listeners).

  function submitScores() {
    if(!scriptURL) return;
    if(gameMode === "solo") {
      // Solo: send player's score
      var url = scriptURL + "?mode=solo&score=" + encodeURIComponent(score);
      fetch(url, { mode: 'no-cors' })
        .catch(err => console.log("Score submission error (solo):", err));
    } else {
      // Group: send each team's score
      teamScores.forEach(function(s, idx) {
        var teamName = "Team " + (idx+1);
        var url = scriptURL + "?mode=group&team=" + encodeURIComponent(teamName) + "&score=" + encodeURIComponent(s);
        fetch(url, { mode: 'no-cors' })
          .catch(err => console.log("Score submission error (group):", err));
      });
    }
    console.log("Scores submitted to Google Sheet.");
  }

  // Utility: shuffle an array in-place
  function shuffleArray(arr) {
    for(let i = arr.length - 1; i > 0; i--) {
      let j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }
</script>

</body>
</html>

